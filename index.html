<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0' name='viewport' />
	<title>Fuze</title>
	<link rel="stylesheet" href="css/normalize.css">
	<link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.1.0/css/bootstrap.min.css">
	<link rel="stylesheet" href="css/style.css">
</head>
<body>
	<div class="container-fluid site-container">
		<div class="row-fluid">
			<section id="playContainer" class="left-panel content-panel site-section"></section>
			<section id="searchContainer" class="middle-panel content-panel site-section"></section>
			<section id="queueContainer" class="right-panel content-panel site-section"></section>
		</div>
	</div>
	<div class="modal fade" id="servicesContainer" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	</div>
	<script id="leftHandle" type="text/ractive">
		<div class="handle-wrap left-handle">
			<button title="Move to middle" class="content-panel-handle btn-amazing">
				<span class="glyphicon glyphicon-chevron-left"></span>
			</button>
			<button title="Toggle pin" class="content-panel-pin btn-amazing">
				<span class="glyphicon glyphicon-pushpin"></span>
			</button>	
		</div>	
	</script>
	<script id="rightHandle" type="text/ractive">
		<div class="handle-wrap right-handle">
			<button title="Toggle pin" class="content-panel-pin btn-amazing">
				<span class="glyphicon glyphicon-pushpin"></span>
			</button>	
			<button title="Move to middle" class="content-panel-handle btn-amazing">
				<span class="glyphicon glyphicon-chevron-right"></span>
			</button>	
		</div>	
	</script>
	<script id="play" type="text/ractive">
		<div class="content-panel-header">
			<button class="content-panel-icon btn-amazing">
				<span class="glyphicon glyphicon-play"></span>
			</button>
			{{> leftHandle}}
			<form name="play-form">
				
			</form>
			{{> rightHandle}}
		</div>
		<div class="content-panel-body">
			<div class="content-panel-body-inner">
			{{#content}}
			<iframe id="soundcloudPlayer" 
					src="https://w.soundcloud.com/player/?url=" 
					width="100%" height="100%" scrolling="no" frameborder="no" class="hidden"></iframe>
			<div id="youtubePlayer" class="hidden"></div>
			{{/content}}
			{{^content}}
			<p class="panel-message">You are not playing any content, try selecting a song from your queue.</p>
			{{/content}}
			</div>
		</div>
	</script>
	<script id="queue" type="text/ractive">
		<div class="content-panel-header">
			<button class="content-panel-icon btn-amazing">
				<span class="glyphicon glyphicon-list"></span>
			</button>
			{{> leftHandle}}
			<form name="queue-form" on-submit="save">
				<div class="txt-amazing">
					<input value="{{queueName}}" placeholder="Name your queue...">
				</div>
				<button type="submit" class="btn-amazing">
					<span class="glyphicon glyphicon-floppy-save"></span>
				</button>
				<button type="button" class="btn-amazing" on-click="clear">
					<span class="glyphicon glyphicon-trash"></span>
				</button>	
			</form>
			{{> rightHandle}}
		</div>
		<div class="content-panel-body">
			<div class="content-panel-body-inner">
				
				<ul class="queue list-group">
					{{#queue:i}}
					<li on-click="play"
							class="content {{active == i ? 'background-primary' : ''}}"
							data-index="{{i}}">
						{{> contentTile}}
						<button on-click="remove" type="button" class="btn-queue-remove">
							<span class="glyphicon glyphicon-remove"></span>
						</button>
					</li>
					{{/queue}}
				</ul>
				{{^queue}}
				<p class="panel-message">Your queue is empty, try adding some songs from your search results.</p>
				{{/queue}}
			</div>
		</div>
	</script>
	<script id="search" type="text/ractive">
		<div class="content-panel-header">
			<button class="content-panel-icon btn-amazing">
				<span class="glyphicon glyphicon-search"></span>
			</button>
			{{> leftHandle}}
			<form name="search-form" on-submit="search">
				<div class="txt-amazing">
					<input value="{{query}}" class="nav-text-input" placeholder="search...">
				</div>
				<button type="submit" class="btn-amazing">
					<span class="glyphicon glyphicon-search"></span>
				</button>
				<button type="button" class="btn-amazing" on-click="clear">
					<span class="glyphicon glyphicon-cog"></span>
				</button>
			</form>
			{{> rightHandle}}
		</div>
		<div class="content-panel-body">
			<div class="content-panel-body-inner">
				<ul class="results list-group">
					{{#results:i}}
					<li class="content" on-click="addToQueue" data-index="{{i}}">
						{{> contentTile}}
					</li>
					{{/results}}
				</ul>
				{{^results}}
				<p class="panel-message">{{message}}</p>
				{{/results}}
			</div>
		</div>
	</script>
	<script id="services" type="text/ractive">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
					<h4 class="modal-title">Services</h4>
				</div>
				<div class="modal-body">
					<ul class="list-group">
						{{#services}}
						<li id="{{slug}}-service" class="list-group-item">
							<button data-service="{{slug}}" type="button" class="btn btn-default" on-click="connect">{{name}}</button>
							<span id="{{slug}}-status" class="pull-right status"></span>
						</li>
						{{/services}}
					</ul>
				</div>
			</div>
		</div>
	</script>
	<script type="text/html" id="contentTile">
		<div class="content-inner">
			<div class="bignail">
				<img src="{{image ? image : 'images/album-art-missing.png'}}" alt="{{title}}">					
			</div>
			<div class="content-details">
				<h5 class="title">{{title}}</h5>
				{{#description}}
				<p class="description">{{description}}</p>
				{{/description}}
				<table class="table table-condensed" style="font-size: .6em;">
					<tbody>
						{{#likes}}
						<tr>
							<th>likes</th>
							<td>{{likes}}</td>
						</tr>
						{{/likes}}
						{{#plays}}
						<tr>
							<th>plays</th>
							<td>{{plays}}</td>
						</tr>
						{{/plays}}
					</tbody>
				</table>
			</div>	
		</div>
	</script>
	<script src="js/libs/jquery-1.10.2.js"></script>
	<script src="js/libs/jquery.cookie.js"></script>
	<script src="js/libs/Ractive.js"></script>
	<script src="//netdna.bootstrapcdn.com/bootstrap/3.1.0/js/bootstrap.min.js"></script>
	<script src="//connect.soundcloud.com/sdk.js"></script>
	<script src="//w.soundcloud.com/player/api.js"></script>
	<script src="//www.youtube.com/iframe_api"></script>
	<script src="js/app.js"></script>
</body>
</html>
